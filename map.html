<!DOCTYPE html>
<html lang="en">
<head>
	<title>Herramientas de Visualizacion - Ma. Isabel Gonzalez</title>
	<meta charset="utf-8">
	<!-- Establecer el ancho de pantalla en base al dispositivo -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Cargar las librerias css -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/estilos.css">
	<script src="js/jquery.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/d3.v5.js"></script>
	<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
	<script src="https://d3js.org/topojson.v0.min.js"></script>
	<!--<script src="https://d3js.org/topojson.v2.min.js"></script>-->

	<style>

		.municipalities {
		  fill: #222;
		}

		.municipalities :hover {
		  fill: orange;
		}

		.state-boundary {
		  fill: none;
		  stroke: #fff;
		  pointer-events: none;
		}

		.municipality-boundary {
		  fill: none;
		  stroke: #fff;
		  stroke-opacity: .25;
		  stroke-width: .5px;
		  pointer-events: none;
		}

		</style>
</head>
<body>

<nav class="navbar navbar-dark bg-dark">
	<a class="navbar-brand" href="#"><span class="d-none d-sm-none d-md-block"><img id="logo" alt="Logo" src="imagenes/logo.png"></span><span class="d-inline-block">Herramientas de Visualizaci&oacute;n</span></a>
</nav>

<div class="container-fluid">
	<div class="row">
		<div class="col-sm-12 col-12" >&nbsp;</div>
	</div>

	<div class="form-group row">
		<div class="col-lg-1"></div>

		<div class="col-md-3 col-sm-12 col-12">
			<div class="row" id="divEstado">
				<div class="col-sm-12 col-12">
					<span class="d-block p-2 bg-dark text-white">Estado</span>
				</div>
			</div>
			<div class="row" id="divIngreso">
				<div class="col-sm-12 col-12">
					<span class="d-block p-2 bg-dark text-white">Ingreso</span>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-12">
					<span class="d-block p-2 bg-dark text-white">Orden</span>
					<div class="custom-control custom-radio">
						<input type="radio" id="customAscendente" name="customRadio" class="custom-control-input" onChange="grafica()" checked>
						<label class="custom-control-label" for="customAscendente">Ascendente</label>
					</div>
					<div class="custom-control custom-radio">
						<input type="radio" id="customDescendente" name="customRadio" class="custom-control-input" onChange="grafica()">
						<label class="custom-control-label" for="customDescendente">Descendente</label>
					</div>

				</div>
			</div>
		</div>

		<div class="col-lg-7 col-md-9 col-sm-12 col-12">
			<div class="row">
				<div class="col-sm-11 col-11" id="divGraficaD3map">
					<svg width="960" height="600"></svg>
				</div>
			</div>
		</div>

		<div class="col-lg-1"></div>

	</div>

	<div class="row">
		<div class="col-sm-12 col-12">&nbsp;</div>
	</div>

	<div class="row">
		<div class="col-sm-12 col-12"><a href="index.html" style="color:inherit"><button type="button" class="btn btn-sm btn-outline-secondary">Regresar</button></a></div>
	</div>

	<div class="row">
		<div class="col-sm-12 col-12">&nbsp;</div>
	</div>
</div>


<script type="text/javascript">


/*
var width = 960,
    height = 500;

var projection = d3.geoMercator()
    .scale(1200)
    .center([-102.34034978813841, 24.012062015793]);

var svg = d3.select("#divGraficaD3map").append("svg")
    .attr("width", width)
    .attr("height", height);

var g = svg.append("g");
*/


var svg = d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height");

//console.log('Ostia 1');

var projection = d3.geoMercator()
      .scale(1400)
      .center([-102, 26]);

//console.log('Ostia 2');

var path = d3.geoPath().projection(projection);

//console.log('Ostia 3');


var promises = [
  d3.json("data/mx_tj.json")
]

Promise.all(promises).then(ready)

function ready([mx]) {
	//console.log('Ostia 5');

	svg.selectAll("path")
    .data(topojson.object(mx, mx.objects.municipalities).geometries)
    .enter().append("path")
    .attr("d", path)
    .append("title")
      .text(function(d) { if(d.properties.mun_name=='Tlalpan') { console.log( d.properties); } return d.properties.mun_name; })
    //.attr("fill", "transparent")
    //.style("stroke", "#333")
    //.style("stroke-width", ".2px")
    //.attr("class", "muns")
    ;


    svg.append("path")
      .datum(topojson.mesh(mx, mx.objects.municipalities, function(a, b) { return a.properties.state_code !== b.properties.state_code; }))
      .attr("class", "state-boundary")
      .attr("d", path);

}



//console.log('Ostia 4');


/*
var svg = d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height");


var projection = d3.geoMercator()
      .scale(1400)
      .center([-102, 26]);


var path = d3.geoPath()
	.projection(projection);

var promises = [
  d3.json("data/geo-data.json")
]

Promise.all(promises).then(ready)

function ready([mx]) {
    svg.append('path')
		.datum(topojson.feature(mx, mx.objects.MEX_adm1))
		//.attr('fill', 'blue')
		.attr("stroke", "white")
		.attr("d", path)
		.style("fill", function(d, i) {
			console.log(i); console.log(d);  return 'blue';
		});
}*/

</script>
</script>

</body>
</html>
